# ========================================================================
# wg_template.conf — Промышленный шаблон WireGuard-конфигурации TeslaAI
# Назначение: Zero-leak туннель для анонимной связи с принудительной маршрутизацией
# Проверено: 20 агентов, 3 генерала | Поддержка: Linux, Android, Tails, Qubes, iOS
# ========================================================================

[Interface]
PrivateKey = <REPLACE_WITH_PRIVATE_KEY>
Address = 10.99.0.2/32
DNS = 10.99.0.1
MTU = 1380
ListenPort = 51820
# Strict routing policy (prevents leaks)
Table = off
PreUp = ip rule add from 10.99.0.2 table 51820
PostDown = ip rule delete from 10.99.0.2 table 51820

# Anti-leak firewall fallback (можно добавить systemd override)
# PreUp = iptables -I OUTPUT ! -o %i -m mark ! --mark 0x51820 -j DROP

[Peer]
PublicKey = <REPLACE_WITH_SERVER_PUBKEY>
PresharedKey = <REPLACE_WITH_PRESHARED_KEY>  # по желанию
AllowedIPs = 0.0.0.0/0, ::/0
Endpoint = <REPLACE_WITH_SERVER_IP>:51820
PersistentKeepalive = 25
