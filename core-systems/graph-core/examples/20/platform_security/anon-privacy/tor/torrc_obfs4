# === Промышленный TOR-конфиг с поддержкой obfs4 ===
# Назначение: цифровая анонимность и обход цензуры/блокировок
# Уровень безопасности: hardened / CCA-resistant / DPI-evading

# Используем bridge обфускации obfs4 — защищает от глубокого анализа трафика
UseBridges 1
ClientTransportPlugin obfs4 exec /usr/bin/obfs4proxy

# === Мосты TOR с obfs4 ===
# (используйте актуальные, либо подключите pluggable discovery)
Bridge obfs4 185.220.101.1:443 473AC10B0C20E70D358AA3A5AEAE9A151A24333A cert=r1XUbdzU... iat-mode=0
Bridge obfs4 95.217.77.151:443 26FA37E7B2620D35F161D72779B40D812A99F6BE cert=ZKDZ8v6... iat-mode=0
Bridge obfs4 144.217.80.234:443 1028F1A22E2963013F78558267DFAB59B118F6C4 cert=lwYdLzp... iat-mode=0

# === Поведение при запуске ===
RunAsDaemon 1
DataDirectory /var/lib/tor

# === Безопасность и защита трафика ===
SafeLogging 1
AvoidDiskWrites 1
DisableDebuggerAttachment 1
AvoidDiskWrites 1

# === DNS, сокеты и локальные настройки ===
AutomapHostsOnResolve 1
DNSPort 5353
TransPort 9040

# === Firewall-обход (если настроены правила) ===
ClientUseIPv6 0
ClientPreferIPv6ORPort 0

# === Журналирование ===
Log notice file /var/log/tor/tor.log

# === Дополнительные меры устойчивости ===
MaxCircuitDirtiness 10 minutes
CircuitStreamTimeout 60 seconds
LearnCircuitBuildTimeout 0
ConnectionPadding 1
ReducedConnectionPadding 0
