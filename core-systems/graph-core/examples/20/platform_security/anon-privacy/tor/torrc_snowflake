# === Конфигурация TOR клиента для Snowflake ===
# Использует добровольные реле через WebRTC и фронтинг CDN/Google

UseBridges 1
ClientTransportPlugin snowflake exec /usr/bin/snowflake-client

# === Bridge адрес не требуется — snowflake сам подбирает реле динамически ===

# === Поведение ===
RunAsDaemon 1
DataDirectory /var/lib/tor_snowflake

# === Безопасность и устойчивость ===
ClientUseIPv6 0
AvoidDiskWrites 1
SafeLogging 1
DisableDebuggerAttachment 1

# === DNS / Прокси-режим ===
TransPort 9040
DNSPort 5353
AutomapHostsOnResolve 1

# === Профилактика анализа трафика ===
ConnectionPadding 1
ReducedConnectionPadding 0
MaxCircuitDirtiness 600
CircuitStreamTimeout 60

# === Snowflake-specific параметры ===
# Можно задать proxy URL или использовать встроенный механизм поиска реле

# === Логирование ===
Log notice file /var/log/tor/tor_snowflake.log
