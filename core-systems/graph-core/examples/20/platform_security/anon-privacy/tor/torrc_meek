# === Конфигурация TOR для meek-обфускации (промышленная версия) ===
# Цель: обход национальных фаерволов и DPI-фильтрации
# Применимо для цифровых миссий укрытия и критической анонимности

UseBridges 1
ClientTransportPlugin meek exec /usr/bin/meek-client

# === meek-over-HTTPS bridge (использует фронтинг через CDN/Google) ===
Bridge meek 0.0.2.0:3 url=https://www.google.com/ front=www.google.com

# Альтернативный провайдер через CDN-Akamai (можно включить при необходимости)
# Bridge meek 0.0.2.0:3 url=https://ajax.aspnetcdn.com/ front=ajax.aspnetcdn.com

# === Поведение клиента ===
RunAsDaemon 1
DataDirectory /var/lib/tor

# Безопасность
SafeLogging 1
AvoidDiskWrites 1
DisableDebuggerAttachment 1
ClientUseIPv6 0

# DNS и прокси
AutomapHostsOnResolve 1
DNSPort 5353
TransPort 9040

# === Padding и антианализ ===
ConnectionPadding 1
ReducedConnectionPadding 0
CircuitStreamTimeout 60
MaxCircuitDirtiness 600

# === Лог ===
Log notice file /var/log/tor/tor_meek.log
