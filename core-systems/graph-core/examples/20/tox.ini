[tox]
envlist = py311, lint, mypy, black

[testenv]
description = Запуск тестов с pytest
deps =
    pytest
    pytest-asyncio
    coverage
commands =
    coverage run -m pytest tests/
    coverage report -m
    coverage xml

[testenv:lint]
description = Запуск flake8 и isort для проверки стиля кода
deps =
    flake8
    isort
commands =
    isort --check-only --diff src tests
    flake8 src tests

[testenv:mypy]
description = Запуск статического анализа типов mypy
deps = mypy
commands = mypy src

[testenv:black]
description = Проверка форматирования кода через black
deps = black
commands = black --check src tests
