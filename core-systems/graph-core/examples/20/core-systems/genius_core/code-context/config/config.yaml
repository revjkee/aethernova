# genius-core/code-context/config/config.yaml

# === SYSTEM IDENTIFICATION ===
system:
  name: TeslaAI Genius Code Context
  instance_id: ctx-genius-node-001
  mode: production  # options: development, production, test

# === INDEXER CONFIGURATION ===
indexer:
  root_path: /workspace
  include_extensions: [".py", ".js", ".ts", ".html", ".css", ".cpp", ".go", ".rs"]
  exclude_dirs: [".git", "node_modules", "__pycache__"]
  max_file_size_kb: 512
  language_detector_model: fasttext  # or 'guesslang', 'gpt'

# === GRAPH GENERATION ===
symbol_graph:
  engine: ast-cfg
  parallel: true
  batch_size: 50
  max_nodes: 5000
  export_dot: true
  export_json: true
  enable_merkle_hash: true

# === EMBEDDING SEARCH ===
embedding:
  model: all-MiniLM-L6-v2
  dimension: 384
  backend: sentence-transformers
  update_interval_sec: 180
  enable_hybrid_rerank: true
  bm25_weight: 0.3
  embed_weight: 0.7

# === CONTEXT AGENTS ===
agents:
  enable_summary_agent: true
  enable_dependency_tracer: true
  enable_comment_mapper: true
  max_context_depth: 4
  token_limit: 4096
  batch_mode: auto
  persona_mode: codex

# === SYNC + VERSION CONTROL ===
sync:
  watch_interval_sec: 3
  enable_delta_indexer: true
  dag_tracking: true
  merkle_depth_limit: 8
  file_cache_enabled: true

# === UI CONFIGURATION ===
ui:
  theme: auto
  port: 8080
  live_reload: true
  enable_tooltips: true
  enable_graph_panels: true
  log_panel: true

# === API SERVER ===
api:
  rest:
    host: 0.0.0.0
    port: 9000
    enable_cors: true
  websocket:
    enabled: true
    port: 9010
    buffer_size: 512
  graphql:
    enabled: true
    schema_path: ./config/graphql_schema.graphql

# === PLUGINS ===
plugins:
  enable_vscode_plugin: true
  enable_claude_plugin: true
  enable_gemini_plugin: true
  auto_reload: true

# === LOGGING & MONITORING ===
logging:
  level: INFO
  format: "[%(asctime)s] %(levelname)s - %(message)s"
  file: logs/genius_code_context.log
  telemetry:
    enabled: true
    push_interval_sec: 60
    exporters: ["prometheus", "opentelemetry"]

# === SECURITY ===
security:
  validate_prompts: true
  input_sanitization: true
  access_control: role-based
  audit_log_enabled: true

# === DEVOPS ===
devops:
  auto_reload_index_on_commit: true
  git_integration:
    enabled: true
    provider: local
    hooks:
      - on_commit: index
      - on_merge: sync

# === FAILOVER ===
failover:
  retry_on_error: true
  max_retries: 3
  backoff_sec: 5
  notify_on_failure: true

# === DEBUG OPTIONS ===
debug:
  enable_mock_indexer: false
  simulate_latency: false
  show_ast_debug: false
