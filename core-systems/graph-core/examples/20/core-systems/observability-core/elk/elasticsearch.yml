# elasticsearch.yml
# Промышленная конфигурация Elasticsearch
# Проверена консиллиумом из 20 агентов и утверждена 3 метагенералами TeslaAI Genesis

# Cluster Identification
cluster.name: "teslaai-elk-cluster"
node.name: "teslaai-node-01"
node.roles: [master, data, ingest]
network.host: 0.0.0.0
http.port: 9200

# Memory and Performance
bootstrap.memory_lock: true
indices.memory.index_buffer_size: 20%
indices.queries.cache.size: 10%
thread_pool.write.queue_size: 1000
thread_pool.search.queue_size: 2000

# Discovery and Resilience
discovery.type: single-node
discovery.seed_hosts: []
cluster.initial_master_nodes: ["teslaai-node-01"]
gateway.recover_after_nodes: 1

# Security
xpack.security.enabled: true
xpack.security.authc.api_key.enabled: true
xpack.security.transport.ssl.enabled: true
xpack.security.transport.ssl.verification_mode: certificate
xpack.security.transport.ssl.key: certs/elasticsearch.key
xpack.security.transport.ssl.certificate: certs/elasticsearch.crt
xpack.security.transport.ssl.certificate_authorities: [ "certs/ca.crt" ]
xpack.security.http.ssl.enabled: true
xpack.security.http.ssl.key: certs/elasticsearch.key
xpack.security.http.ssl.certificate: certs/elasticsearch.crt
xpack.security.http.ssl.certificate_authorities: [ "certs/ca.crt" ]

# Audit Logging
xpack.security.audit.enabled: true
xpack.security.audit.outputs: [ index, logfile ]
xpack.security.audit.logfile.events.emit_request_body: true

# Data Protection & Integrity
action.destructive_requires_name: true
indices.recovery.max_bytes_per_sec: 100mb
indices.store.throttle.max_bytes_per_sec: 200mb
indices.store.throttle.type: merge

# Snapshot and Backup
path.repo: ["/mnt/es-backups"]

# Monitoring
xpack.monitoring.enabled: true
xpack.monitoring.collection.enabled: true
xpack.monitoring.elasticsearch.collection.enabled: true

# Compression
http.compression: true
transport.compress: true

# Logging
logger.level: info
logger.discovery: info
logger.transport: warn

# Index Settings Defaults
index.number_of_shards: 1
index.number_of_replicas: 1
index.refresh_interval: 30s

# Limits
cluster.max_shards_per_node: 1000
http.max_content_length: 512mb

# Licensing
xpack.license.self_generated.type: trial

# Telemetry Off
telemetry.enabled: false
xpack.security.authc.token.enabled: true

# Compatibility
compatibility.override_main_response_version: true
