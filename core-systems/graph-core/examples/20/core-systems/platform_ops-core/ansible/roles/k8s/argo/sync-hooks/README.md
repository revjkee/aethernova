# ArgoCD Sync Hooks для TeslaAI

## Обзор

Данный каталог содержит Kubernetes manifest'ы для ArgoCD lifecycle hooks, которые автоматизируют процессы до и после синхронизации приложений. Sync-hooks обеспечивают предсказуемость, безопасность и чистоту окружения TeslaAI.

## Структура

- `pre-sync-job.yaml` — Job, выполняющийся перед началом синхронизации.
- `post-sync-job.yaml` — Job, выполняющийся после успешной синхронизации.
- `validate-resources.yaml` — ValidatingWebhook для проверки ресурсов до деплоя.
- `cleanup-old-resources.yaml` — Job для удаления устаревших ресурсов после деплоя.

## Основные принципы

- **Zero Trust**: все hook'и запускаются под отдельными сервис-аккаунтами с минимальными правами.
- **Безопасность**: процессы работают от непривилегированных пользователей, все доступы строго ограничены.
- **Надежность**: установлены backoffLimits, таймауты и политика restartPolicy.
- **Логирование и аудит**: все действия логируются в централизованные системы.
- **Гибкость**: поддержка передачи параметров через ConfigMap и Secrets.

## Рекомендации по использованию

- Всегда проверять успешное выполнение pre-sync-job перед началом деплоя.
- Использовать post-sync-job для миграций, очисток и уведомлений.
- Внедрять validate-resources.yaml для предотвращения попадания недопустимых конфигураций.
- Регулярно запускать cleanup-old-resources.yaml для поддержки чистоты кластера.
- Интегрировать hook'и с CI/CD пайплайнами для полного цикла автоматизации.

## Контакты и поддержка

- DevOps Team TeslaAI: devops@teslaai.io
- Документация: https://docs.teslaai.io/ci-cd/sync-hooks
- Slack: #teslaai-devops

---

Документ обновляется централизованно и является частью корпоративного стандарта TeslaAI по обеспечению безопасности и устойчивости GitOps процессов.
