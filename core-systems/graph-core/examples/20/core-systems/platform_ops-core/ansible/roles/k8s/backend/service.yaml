apiVersion: v1
kind: Service
metadata:
  name: backend-service
  namespace: backend
  labels:
    app.kubernetes.io/name: teslaai-backend
    app.kubernetes.io/component: core-api
    app.kubernetes.io/part-of: teslaai
    version: v20x-industrial
    zero-trust: enforced
    istio-injection: enabled
  annotations:
    prometheus.io/scrape: "true"
    prometheus.io/port: "8080"
    mesh.teslaai.io/traffic-class: "core"
    networking.istio.io/exportTo: "."
spec:
  selector:
    app: teslaai-backend
  ports:
    - name: http
      port: 80
      targetPort: 8080
      protocol: TCP
    - name: metrics
      port: 9090
      targetPort: 9090
      protocol: TCP
  type: ClusterIP
  ipFamilyPolicy: PreferDualStack
  internalTrafficPolicy: Local
  sessionAffinity: None
