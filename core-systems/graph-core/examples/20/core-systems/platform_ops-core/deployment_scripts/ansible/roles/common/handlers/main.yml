---
# /orchestrator/deployment_scripts/ansible/roles/common/handlers/main.yml

- name: Restart sshd service
  ansible.builtin.service:
    name: sshd
    state: restarted
  listen: restart sshd

- name: Reload systemd daemon
  ansible.builtin.command: systemctl daemon-reload
  become: true
  listen: reload systemd

- name: Restart nginx service
  ansible.builtin.service:
    name: nginx
    state: restarted
  listen: restart nginx

- name: Restart firewalld service
  ansible.builtin.service:
    name: firewalld
    state: restarted
  when: ansible_facts.services.firewalld is defined
  listen: restart firewalld

- name: Reload firewall rules
  ansible.builtin.command: firewall-cmd --reload
  become: true
  when: ansible_facts.services.firewalld is defined
  listen: reload firewall

- name: Restart docker service
  ansible.builtin.service:
    name: docker
    state: restarted
  listen: restart docker

- name: Restart cron service
  ansible.builtin.service:
    name: cron
    state: restarted
  when: ansible_facts.services.cron is defined or ansible_facts.services.crond is defined
  listen: restart cron

- name: Restart network service (systemctl)
  ansible.builtin.service:
    name: network
    state: restarted
  when: ansible_facts.services.network is defined
  listen: restart network

- name: Reload sysctl configuration
  ansible.builtin.command: sysctl --system
  become: true
  listen: reload sysctl

