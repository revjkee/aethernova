# agent-mesh/protocols/protocol_config.yaml

default_transport: "redis"              # Основной транспорт по умолчанию

fallback_order:                         # Порядок fallback'ов при недоступности основного транспорта
  - "redis"
  - "kafka"
  - "zmq"
  - "grpc"

transports:
  redis:
    enabled: true
    url: "redis://localhost:6379"
    send_retries: 3
    backoff_factor: 1.5
    channel_prefix: "agent:"

  kafka:
    enabled: true
    bootstrap_servers: "localhost:9092"
    send_retries: 2
    compression_type: "gzip"
    topic_prefix: "agent."

  zmq:
    enabled: false
    agent_endpoints:
      agent_01: "tcp://127.0.0.1:5555"
      agent_02: "tcp://127.0.0.1:5556"

  grpc:
    enabled: false
    host: "localhost"
    port: 50051
    retry_timeout: 2.0

timeouts:
  send_timeout: 3.0                   # Общий таймаут отправки сообщения (сек)
  subscribe_timeout: 5.0             # Таймаут при подписке агента (сек)
  retry_max_backoff: 10.0            # Максимальный backoff при повторных попытках
