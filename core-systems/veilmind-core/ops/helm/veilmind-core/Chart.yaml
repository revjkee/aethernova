apiVersion: v2
name: veilmind-core
description: >
  VeilMind Core — облачно-нативный бэкенд сервис с упором на безопасность,
  Zero-Trust подход, наблюдаемость и промышленный CI/CD.

type: application

# Версия чарта (semver). Обновляется при изменении шаблонов/структуры чарта.
version: 0.1.0

# Версия приложения (отображается в UI и может отличаться от chart version).
# Рекомендуется заполнять из CI/CD (например, git tag/sha).
appVersion: "0.0.0"

# Минимально поддерживаемая версия Kubernetes
kubeVersion: ">=1.26.0-0"

home: "https://example.com/veilmind-core"   # заменить на реальный URL продукта/документации
icon: "https://example.com/assets/veilmind-core-icon.png"  # заменить на реальный URL иконки

sources:
  - "https://github.com/your-org/veilmind-core"            # заменить на реальный репозиторий
  - "https://docs.example.com/veilmind-core"               # заменить на реальную документацию

keywords:
  - veilmind
  - zero-trust
  - security
  - backend
  - kubernetes
  - observability

maintainers:
  - name: VeilMind Platform Team
    email: platform@your-org.com
    url: "https://example.com/team"                        # опционально
  - name: SRE / DevSecOps
    email: sre@your-org.com

annotations:
  # Лицензия чарта/пакета для каталогов (Artifact Hub)
  artifacthub.io/license: "Apache-2.0"

  # Ссылки (показываются на Artifact Hub)
  artifacthub.io/links: |
    - name: Source
      url: https://github.com/your-org/veilmind-core
    - name: Documentation
      url: https://docs.example.com/veilmind-core
    - name: Security Policy
      url: https://github.com/your-org/veilmind-core/security/policy

  # Список контейнерных образов, связанных с чартом (информативно для пользователей)
  artifacthub.io/images: |
    - name: veilmind-core
      image: ghcr.io/your-org/veilmind-core:0.0.0
      platforms:
        - linux/amd64
        - linux/arm64
      description: Main application container image
    - name: veilmind-migrations
      image: ghcr.io/your-org/veilmind-migrations:0.0.0
      description: Database / storage migrations job

  # История изменений релиза чарта (поддерживайте при каждом bump версии)
  artifacthub.io/changes: |
    - kind: added
      description: Initial public Helm chart for veilmind-core (Deploy/Service/HPA/PDB/ServiceMonitor).
    - kind: changed
      description: PDB defaults aligned with production policies, kubeVersion >=1.26.
    - kind: security
      description: Default PodSecurityContext/ContainerSecurityContext hardened in templates.

  # Подпись артефактов (если chart подписывается helm provenance + cosign/pgp)
  artifacthub.io/signKey: |
    fingerprint: "AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
    url: "https://example.com/keys/helm-pgp-public.key"

  # Маркеры безопасности/релиза
  artifacthub.io/containsSecurityUpdates: "false"
  artifacthub.io/prerelease: "false"

# Зависимости можно определить при реальной необходимости.
# Если ваш чарт использует общий библиотечный чарт (например, bitnami/common),
# раскомментируйте и синхронизируйте шаблоны.
# dependencies:
#   - name: common
#     version: 2.x.x
#     repository: "oci://registry-1.docker.io/bitnamicharts"
#     # condition: common.enabled   # при необходимости
#     # tags: [library, helpers]
deprecated: false
