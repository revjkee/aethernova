monitoring:
  enabled: true
  prometheusRules:
    enabled: true
    interval: 1m
    runbookUrl: https://runbooks.internal/veilmind-core
    dashboardUrl: https://grafana.internal/d/veilmind-core
    matchers:
      jobRegex: ".*veilmind-core.*"
      podRegex: "veilmind-core.*"
      containerRegex: ".*"
    durations:
      short: 5m
      medium: 10m
      long: 30m
    metricNames:
      httpTotal: http_requests_total
      httpBucket: http_request_duration_seconds_bucket
      grpcBucket: grpc_server_handling_seconds_bucket
    thresholds:
      http:
        errorRate5xx: 0.02
        errorRate4xx: 0.05
        p99Seconds: 0.8
        p95Seconds: 0.4
        p50Seconds: 0.2
      grpc:
        enabled: true
        errorRate: 0.02
        p99Seconds: 0.8
      k8s:
        restart5m: 3
        restart1h: 10
      resources:
        cpuSaturation: 0.9
        memorySaturation: 0.9
    labels:
      team: "platform"
      service: "veilmind-core"
    annotations:
      owner: "oncall-sre@company.tld"
