# red_team_basics.yaml — Industrial AI-Training Course Blueprint (x20 Enhanced)
# TeslaAI Genesis | Validated by 20 agents + 3 metagenerals

course_id: red_team_basics
title: Основы Red Team
description: |
  Пошаговый вводный курс по этичному хакингу, симуляции атак, эксплуатации уязвимостей и проникновению в защищённые инфраструктуры.
  Подходит для начинающих специалистов в Offensive Security. Активируется в TeslaAI обучающем ядре.

metadata:
  version: 1.0-industrial
  difficulty: beginner
  tags: [red_team, penetration_testing, ethical_hacking, reconnaissance, tools]
  estimated_duration_minutes: 180
  prerequisites:
    - intro_to_linux
    - network_basics

modules:
  - id: recon_01
    title: Сканирование целей и OSINT
    description: |
      Использование инструментов `nmap`, `amass`, `theHarvester` и пассивного OSINT.
    objectives:
      - Понять этапы разведки
      - Научиться собирать информацию без обнаружения
    tools: [nmap, amass, theHarvester]
    actions:
      - type: command
        tool: nmap
        args: "-T4 -A -v target_ip"
      - type: manual_check
        instructions: "Проверь полученные домены с помощью `amass enum -d target.com`"
    assessment:
      type: quiz
      questions:
        - id: q1
          type: multiple_choice
          prompt: "Что такое пассивная разведка?"
          options:
            - Собирание информации без взаимодействия с целью
            - Использование metasploit
            - Атака по протоколу SMB
            - Подбор паролей по словарю
          correct: 0

  - id: access_01
    title: Эксплуатация базовой уязвимости
    description: |
      Работа с Metasploit для эксплуатации уязвимости `vsftpd 2.3.4`.
    objectives:
      - Найти уязвимый сервис
      - Выполнить успешную эксплуатацию
    tools: [metasploit, searchsploit]
    actions:
      - type: exploit
        tool: metasploit
        module: exploit/unix/ftp/vsftpd_234_backdoor
        parameters:
          RHOSTS: target_ip
          RPORT: 21
      - type: verification
        expect_shell: true
    assessment:
      type: hands_on
      checker_script: validate_vsftpd_exploit.sh

  - id: persistence_01
    title: Создание постоянного доступа
    description: |
      Добавление `reverse shell` в cron и перехват входа пользователя через `.bashrc`.
    objectives:
      - Создать cron task с обратным подключением
      - Убедиться в устойчивости доступа
    tools: [bash, netcat, crontab]
    actions:
      - type: manual
        instructions: "Добавьте в cron строку для подключения к 10.10.10.10:4444"
    assessment:
      type: peer_review

caplets:
  - id: capture_flag
    description: Захват `flag.txt` из `/root/` как финальная проверка
    type: simulation
    flag_location: /root/flag.txt
    requires_shell: true

auto_grading:
  enabled: true
  weights:
    recon_01: 30
    access_01: 40
    persistence_01: 30
  min_score_to_pass: 70

dependencies:
  - recon_01 -> access_01
  - access_01 -> persistence_01

ai_hinting:
  enabled: true
  engine: "teslaai:genius-hint-core"
  strategies:
    - dynamic_code_generation
    - prompt_reformulation
    - sim_data_injection
