# OmniMind Core

OmniMind Core — промышленное ядро для построения многоагентных ИИ-систем и оркестрации принятия решений. Этот репозиторий определяет архитектурные инварианты, интерфейсы модулей, требования к качеству, безопасность, наблюдаемость и процессы жизненного цикла.

## Миссия и область применения

- Единое ядро для многодоменных ИИ-сценариев: понимание, планирование, действие, обратная связь.
- Строгие контракты между модулями: детерминированные API, версионирование, совместимость.
- Производственные характеристики: предсказуемость, отказоустойчивость, наблюдаемость, безопасность.

README не фиксирует конкретный стек реализации и не утверждает фактов, не подтвержденных кодом. Здесь даны инварианты качества и эталоны интерфейсов.

## Архитектурные инварианты

1. **Модульность и слабая связность.** Каждый модуль имеет публичный контракт (API/ABI/IDL), тесты контрактов и семантическое версионирование.
2. **Наблюдаемость по умолчанию.** Логи, метрики и трассировки должны быть доступны и согласованы по корреляционным идентификаторам.
3. **Безопасность прежде всего.** Zero-Trust, минимально необходимые привилегии (PoLP), верифицируемые зависимости, воспроизводимые сборки.
4. **Детерминируемость контрактов.** Внешние зависимости изолируются, побочные эффекты декларируются.
5. **Отказоустойчивость.** Ограничение каскадных сбоев, таймауты, ретраи с джиттером, предохранители.
6. **Управление конфигурацией.** Только явные параметры, единые источники правды, среда исполнения не меняет поведение без конфигурации.

## Логическая архитектура

- **Kernel** — жизненный цикл агентов, планировщик, события, политика принятия решений.
- **Agent Runtime** — модели компетенций, интерфейсы навыков, ограничители безопасности.
- **Memory/State** — эпизодическая, семантическая и долговременная память, снапшоты.
- **Policy Engine** — правила, ограничения, приоритеты и бюджет вычислений.
- **Event Bus** — шина событий/команд; контракты доставки и идемпотентность.
- **Connectors** — адаптеры к внешним системам; изоляция ошибок и квоты.
- **Observability** — логи, метрики, трассировки, аудит.
- **Security** — аутентификация/авторизация, секреты, подписи артефактов, политика поставок.

Архитектура описана абстрактно и не навязывает конкретную технологию.

## Контракты модулей

Каждый модуль обязан предоставить:
- Описание интерфейсов (например, OpenAPI/Protobuf/Graph schema) и примеры.
- Тесты контрактов (позитивные/негативные/границы).
- Семантическую версию (`MAJOR.MINOR.PATCH`) и политику совместимости.
- Ограничения производительности и памяти (SLO/SLI).
- Политику ошибок: типы, коды, стабильные поля.

## Стандарты качества

- **Покрытие тестами:** не ниже 80% строк и 70% ветвлений для ядра.
- **Статический анализ и стиль:** единообразные правила линтеров и форматтеров.
- **Безопасность цепочки поставок:** lock-файлы, проверка подписей, SBOM.
- **Документирование:** диаграммы архитектуры, примеры вызовов API, таблица совместимости.

## Наблюдаемость

- **Логи:** структурированные, с уровнями, корреляционным `trace_id` и `span_id`.
- **Метрики:** счетчики, гистограммы латентности, размеры очередей, ошибки по классам.
- **Трассировки:** распределенные, с аннотациями событий политики и ограничителей.
- **Аудит:** неизменяемые записи значимых действий.

## Производительность и надежность

- **SLO:** p95 латентности оговаривается на уровне каждого публичного API.
- **Таймауты:** жесткие верхние границы, запрет бесконечного ожидания.
- **Ретраи:** экспоненциальная задержка с джиттером, ограничение попыток.
- **Ограничение нагрузки:** квоты и токены; защита от избыточной конкуренции.

## Конфигурация

- Единый слой конфигурации: переменные среды и/или декларативные файлы.
- Секреты — только из секрет-хранилищ. Секреты в репозиторий не попадают.

## Безопасность

- Модель угроз документируется на модульном уровне.
- Минимизация прав, сегментация сетей/процессов, изоляция выполнения.
- Верификация артефактов (подпись релизов), SBOM, лицензирование зависимостей.

## Тестирование

- **Unit/Property-based** — инварианты и пограничные случаи.
- **Contract** — соответствие стабильным API.
- **Integration** — взаимодействие модулей через реальные контракты.
- **Chaos/Resilience** — инжекция сбоев, деградационные сценарии.
- **Performance** — профилирование, регрессии, бюджет CPU/RAM/IO.

## Версионирование и выпуск релизов

- Семантическое версионирование. Ломающие изменения увеличивают MAJOR.
- Автоматический CHANGELOG на основе аннотаций коммитов.
- Подписанные теги релизов. Воспроизводимые сборки.

## Вклад (Contributing)

- Все изменения проходят код-ревью с чек-листом архитектурных и безопасностных инвариантов.
- MR/PR сопровождаются тестами и обновлением документации.
- Нарушение инвариантов требует ADR (Architectural Decision Record).

## Лицензия

Проект распространяется по лицензии Apache License 2.0. Полный текст находится в файле `LICENSE`.

## Отказ от предположений

README не делает непроверяемых заявлений о конкретной реализации, стеке и окружении. Конкретные команды сборки/запуска добавляются только вместе с кодом, который их поддерживает. Если информации нет, «I cannot verify this».
