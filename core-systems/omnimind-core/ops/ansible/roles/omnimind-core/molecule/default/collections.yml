# omnimind-core/ops/ansible/roles/omnimind-core/molecule/default/collections.yml
# Коллекции Ansible Galaxy для Molecule-сценария "default".
# Устанавливаются командой:
#   ansible-galaxy collection install -r collections.yml
#
# Замечания по версиям:
# - Используем «плавающие» минимальные пины с верхней границей major (SemVer),
#   чтобы получать патчи/минорные багфиксы без неожиданных major-ломаний.
# - Диапазоны подобраны для стабильности на runners GitHub Actions/CI.
#
# Если какой-то драйвер не используется (docker/podman/k8s), коллекцию можно удалить
# или оставить — она не влияет на задачи, если не вызывается.

collections:
  # POSIX/Unix модули: sysctl, mount, firewalld, authorized_key и др.
  - name: ansible.posix
    version: '>=1.5.4,<2.0.0'

  # Универсальные модули сообщества: пакеты, архивация, vcs, systemd, alternatives и др.
  - name: community.general
    version: '>=8.5.0,<10.0.0'

  # Docker-модули и connection plugins (для molecule driver=docker).
  - name: community.docker
    version: '>=3.11.0,<4.0.0'

  # Podman-модули (для molecule driver=podman).
  - name: containers.podman
    version: '>=1.11.0,<2.0.0'

  # Kubernetes/Helm взаимодействие (если тесты проверяют манифесты/ресурсы).
  - name: kubernetes.core
    version: '>=2.4.0,<3.0.0'

  # Криптография/PKI: генерация ключей/CSR/сертификатов, работа с OpenSSL/SSH.
  - name: community.crypto
    version: '>=2.16.0,<3.0.0'

  # Vault lookup/plugins для интеграции секрета в Molecule/Ansible задачи.
  - name: community.hashi_vault
    version: '>=5.1.0,<6.0.0'

# Пример закрепления источника (опционально, по умолчанию Ansible Galaxy):
# server: https://galaxy.ansible.com
#
# Советы по совместимости CI:
# - На GitHub Actions перед установкой коллекций фиксируйте ansible-core (напр. ~=2.16).
# - Если в роли используются специфичные модули (cloud/aws/gcp), добавьте amazon.aws / google.cloud.
