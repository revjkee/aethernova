# observability/dashboards/schemas/validation_rules.yaml

log_event:
  required:
    - timestamp
    - level
    - message
    - service
  optional:
    - user_id
    - trace_id
    - pii_detected
  types:
    timestamp: datetime
    level: string
    message: string
    service: string
    user_id: string
    trace_id: string
    pii_detected: boolean
  constraints:
    level:
      enum: [debug, info, warning, error, critical]
    message:
      maxLength: 10000

metric_event:
  required:
    - name
    - value
    - timestamp
    - tags
  types:
    name: string
    value: float
    timestamp: datetime
    tags: dict
  constraints:
    name:
      pattern: "^[a-zA-Z_:][a-zA-Z0-9_:]*$"
    tags:
      maxKeys: 20

trace_event:
  required:
    - trace_id
    - span_id
    - parent_id
    - service
    - operation
    - duration_ms
  types:
    trace_id: string
    span_id: string
    parent_id: string
    service: string
    operation: string
    duration_ms: int
  constraints:
    duration_ms:
      minimum: 0
      maximum: 300000
