global:
  scrape_interval: 15s
  evaluation_interval: 15s
  scrape_timeout: 10s
  external_labels:
    project: teslaai-genesis
    environment: production

rule_files:
  - "../alerting/rules/system_rules.yaml"
  - "../alerting/rules/app_rules.yaml"
  - "../alerting/rules/threat_rules.yaml"
  - "../alerting/rules/rbac_rules.yaml"
  - "../alerting/rules/ai_predictive_alerts.yml"

alerting:
  alertmanagers:
    - static_configs:
        - targets:
            - 'alertmanager:9093'

scrape_configs:

  - job_name: 'prometheus'
    static_configs:
      - targets: ['localhost:9090']

  - job_name: 'genesis-collector'
    metrics_path: /metrics
    static_configs:
      - targets: ['collector:8010']
        labels:
          component: metrics
          role: collector
          zone: core

  - job_name: 'redis-exporter'
    static_configs:
      - targets: ['redis_exporter:9121']
        labels:
          component: database
          type: redis
          zone: cache

  - job_name: 'postgres-exporter'
    static_configs:
      - targets: ['postgres_exporter:9187']
        labels:
          component: database
          type: postgres
          zone: storage

  - job_name: 'kafka-exporter'
    static_configs:
      - targets: ['kafka_exporter:9308']
        labels:
          component: broker
          type: kafka
          zone: messaging

  - job_name: 'agent-custom-exporter'
    static_configs:
      - targets: ['agent_exporter:9200']
        labels:
          component: agent
          type: autonomous
          zone: edge

  - job_name: 'ai-core-metrics'
    metrics_path: /metrics
    static_configs:
      - targets: ['ai_core:9900']
        labels:
          component: ai
          role: core
          zone: intelligence

  - job_name: 'otel-collector'
    metrics_path: /metrics
    static_configs:
      - targets: ['otel-collector:8889']
        labels:
          component: telemetry
          role: otel
          zone: bridge

  - job_name: 'fallback-check'
    static_configs:
      - targets: ['fallback_node:9000']
        labels:
          component: failover
          role: backup_monitor
          zone: isolated

  - job_name: 'node-exporter'
    static_configs:
      - targets: ['node_exporter:9100']
        labels:
          component: infrastructure
          role: node
          zone: distributed

  - job_name: 'jaeger'
    metrics_path: /metrics
    static_configs:
      - targets: ['jaeger:14269']
        labels:
          component: tracing
          role: jaeger
          zone: trace

  - job_name: 'loki'
    metrics_path: /metrics
    static_configs:
      - targets: ['loki:3100']
        labels:
          component: logging
          role: loki
          zone: logs
