server:
  http_listen_port: 3200
  grpc_listen_port: 9095

distributor:
  receivers:
    otlp:
      protocols:
        grpc:
        http:

ingester:
  lifecycler:
    ring:
      kvstore:
        store: inmemory
      replication_factor: 1
  trace_idle_period: 10s
  max_block_bytes: 5_242_880
  max_block_duration: 5m

compactor:
  compaction:
    block_retention: 1h

storage:
  trace:
    backend: s3
    s3:
      endpoint: "minio:9000"
      bucket: tempo-traces
      access_key: "minioadmin"
      secret_key: "minioadmin"
      insecure: true
    wal:
      path: /tmp/tempo/wal

overrides:
  defaults:
    retention: 24h
    ingestion_rate_limit: 500000
    ingestion_burst_size: 1000000

metrics_generator:
  enabled: true
  storage:
    path: /tmp/tempo/metrics
  processor:
    service_graphs:
      enabled: true
    span_metrics:
      enabled: true

traces:
  ui:
    enabled: true
  filters:
    span_tags:
      x-ai-tag: ["critical", "autonomous", "human-in-loop"]
      x-trust-lvl: ["trusted", "restricted", "suspicious"]
    duration:
      min: 1ms
      max: 15m
  policy:
    max_span_bytes: 262144
    max_trace_bytes: 5242880
    redaction_rules:
      - pattern: "token=.*"
        replacement: "token=<redacted>"
      - pattern: "password=.*"
        replacement: "password=<redacted>"

multitenancy:
  enabled: true
  tenants:
    - id: "genesis-core"
      token: "GENESIS_CORE_TOKEN"
    - id: "genesis-agents"
      token: "GENESIS_AGENTS_TOKEN"
    - id: "anon-core"
      token: "ANON_CORE_TOKEN"
