apiVersion: v1
kind: ConfigMap
metadata:
  name: engine-core-config
  namespace: backend
  labels:
    app: engine-core
  annotations:
    config.kubernetes.io/local-config: "true"
    checksum/config: "{{ .Values.configChecksum }}" # для helm rollout
data:
  APP_ENV: "production"
  APP_DEBUG: "false"
  LOG_LEVEL: "info"

  # Конфигурация REST API
  API_HOST: "0.0.0.0"
  API_PORT: "8000"
  MAX_REQUEST_SIZE_MB: "10"

  # Подключение к сторонним сервисам
  REDIS_HOST: "engine-core-redis"
  REDIS_PORT: "6379"
  POSTGRES_HOST: "engine-core-postgres"
  POSTGRES_PORT: "5432"
  POSTGRES_DB: "engine_core"

  # Прочее
  ENABLE_METRICS: "true"
  TIMEZONE: "UTC"
  WORKER_CONCURRENCY: "4"

  # Конфигурация через JSON, если нужно монтировать как файл
  advanced.json: |
    {
      "cors": {
        "allow_all": false,
        "origins": ["https://example.com"]
      },
      "features": {
        "enable_registration": true,
        "enable_analytics": false
      }
    }
