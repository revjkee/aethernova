{
  "type": "timeseries",
  "title": "Universal rate() (per-second)",
  "description": "Замените PLACEHOLDER_COUNTER_TOTAL и PLACEHOLDER_LABEL_MATCHERS на ваши значения. Панель настроена для чтения из Prometheus и отображения скорости прироста счетчиков.",
  "transparent": true,
  "pluginVersion": "9.5.0",
  "gridPos": { "h": 8, "w": 24, "x": 0, "y": 0 },

  "targets": [
    {
      "refId": "A",
      "range": true,
      "editorMode": "code",
      "datasource": { "type": "prometheus", "uid": "$DATASOURCE_PROM" },
      "expr": "sum by (job) (rate(PLACEHOLDER_COUNTER_TOTAL{PLACEHOLDER_LABEL_MATCHERS}[$__rate_interval]))",
      "legendFormat": "{{job}}"
    }
  ],

  "interval": "$__interval",
  "intervalFactor": 1,

  "fieldConfig": {
    "defaults": {
      "min": 0,
      "decimals": 3,
      "unit": "short",
      "color": { "mode": "palette-classic" },
      "custom": {
        "drawStyle": "line",
        "lineInterpolation": "smooth",
        "lineWidth": 2,
        "fillOpacity": 10,
        "gradientMode": "opacity",
        "spanNulls": true,
        "showPoints": "never",
        "axisPlacement": "auto",
        "axisLabel": "per second",
        "axisSoftMin": 0,
        "axisSoftMax": null,
        "barAlignment": 0,
        "stacking": { "mode": "none", "group": "A" },
        "thresholdsStyle": { "mode": "off" },
        "hideFrom": { "legend": false, "tooltip": false, "viz": false },
        "alertThreshold": true
      },
      "mappings": [],
      "thresholds": { "mode": "absolute", "steps": [ { "color": "green" } ] }
    },
    "overrides": []
  },

  "options": {
    "legend": {
      "displayMode": "table",
      "placement": "bottom",
      "calcs": ["lastNotNull", "max", "min", "mean"]
    },
    "tooltip": { "mode": "multi", "sort": "desc" },
    "timezone": "",
    "useFieldNameForLegend": false
  },

  "links": [],
  "transformations": [],

  "annotations": {
    "list": []
  }
}
