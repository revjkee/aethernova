# ======================================================================
# Aethernova Chain Core — .dockerignore (industrial-grade)
# Цель: минимальный контекст сборки, стабильный кэш, нулевые секреты.
# Безопасные "allowlist" исключения для примеров конфигов.
# ======================================================================

# --- VCS ---
.git
.gitignore
.gitattributes
.gitmodules
.git-crypt/
.hooks/

# --- OS/Editors/IDE ---
.DS_Store
Thumbs.db
ehthumbs.db
$RECYCLE.BIN/
.idea/
.vscode/
*.code-workspace
*.swp
*.swo
*~
*.iml

# --- Logs & runtime ---
logs/
*.log
*.pid
*.seed
*.out
*.err
*.trace
profile.out
heapdump*
core
*.core
*.stackdump

# --- NodeJS / Frontend ---
node_modules/
bower_components/
jspm_packages/
.npm/
.pnpm-store/
.pnp.*
.yarn/
.yarn-cache/
.yarnrc.yml
.yarnrc
.yarn/*
!/.yarn/patches/
!/.yarn/plugins/
!/.yarn/releases/
!/.yarn/sdks/
!/.yarn/versions/
*.tsbuildinfo
dist/
build/
.cache/
.cache-loader/
coverage/
.nyc_output/

# --- Python ---
__pycache__/
*.py[cod]
*.pyo
*.pyd
*.pkl
*.egg-info/
.eggs/
.venv/
venv/
.envrc
.pytype/
.mypy_cache/
.pytest_cache/
.coverage
.coverage.*
htmlcov/
.tox/
.poetry-cache/
.poetry/
pip-wheel-metadata/

# --- Go ---
bin/
obj/
pkg/
*.test
*.cover
*.cov
*.prof
vendor/
# Если используете go mod vendor в прод-сборке — раскомментируйте строку ниже:
# !vendor/**

# --- Rust ---
target/
Cargo.lock
# Если reproducible build требует фиксированного lock-файла — раскомментируйте:
# !Cargo.lock

# --- Java/Gradle/Maven ---
*.class
target/
build/
.gradle/
.gradle-cache/
out/
*.war
*.jar
*.ear

# --- C/C++ ---
*.o
*.a
*.so
*.dylib
*.dll
*.exe
cmake-build-*/
CMakeFiles/
CMakeCache.txt
Makefile
makefile
build-*/
compile_commands.json

# --- Swift ---
.build/
DerivedData/

# --- Docker / Compose (не нужные для контекста) ---
docker-compose*.yml
docker-compose*.yaml
compose*.yml
compose*.yaml
.docker/
.dockerignore
Dockerfile.*.local

# --- Terraform / IaC ---
.terraform/
.terraform.lock.hcl
terraform.tfstate
terraform.tfstate.*
crash.log
override.tf
override.tf.json
*_override.tf
*_override.tf.json

# --- Helm / K8s (артефакты/локальные чарты) ---
charts/**/tmp/
charts/**/charts/
charts/**/Chart.lock
release/*.yaml
kustomize/build/

# --- Secrets & keys (жесткий denylist) ---
*.pem
*.key
*.crt
*.pfx
*.p12
*.asc
*.gpg
*.keystore
*.jks
*.der
*.csr
.sops.yaml
.sops.yml
*.age
age.key
*.kdbx

# --- Env files (оставляем только примеры) ---
.env
.env.*
!.env.example
!.env.*.example
!.env.sample

# --- Test artifacts ---
tests/**/.pytest_cache/
tests/**/__pycache__/
tests/**/coverage/
tests/**/fixtures/generated/
*.snap
*.golden

# --- Monorepo / tooling caches ---
.tmp/
temp/
tmp/
cache/
.cargo/
target/
vendor/bundle/
.bundle/
.ruby-version
.rbenv-version

# --- Documentation build outputs ---
/docs/_build/
/docs/build/
/site/
book/
mkdocs/
mkdocs.yml
# Если документация собирается внутри образа — позвольте исходникам:
!docs/**/index.md
!docs/**/*.md
!docs/**/*.png
!docs/**/*.svg
!docs/**/*.jpg
!docs/**/*.jpeg
!docs/**/*.gif
!docs/**/*.txt

# --- Analytics / datasets (не в образ) ---
data/
datasets/
*.parquet
*.feather
*.arrow
*.avro
*.orc
*.csv
*.tsv
*.jsonl
# Если в образ нужны минимальные встроенные образцы:
!data/examples/**
!datasets/examples/**

# --- SBOM / provenance / reports (в образ обычно не нужно) ---
sbom/
**/sbom/
provenance/
**/provenance/
reports/
**/reports/
audit/
**/audit/

# --- Local scripts & tooling not for image ---
scripts/local/
tools/local/
devtools/
benchmarks/
bench/
perf/

# --- Media / large assets ---
*.mp4
*.mov
*.avi
*.mkv
*.webm
*.wav
*.flac
*.mp3
*.psd
*.ai
*.blend
*.fbx
*.obj
*.zip
*.7z
*.rar
*.tar
*.tar.gz
*.tgz

# --- Project-specific safe allowlist (пример) ---
# Разрешаем только необходимые Dockerfile и контент приложения:
!Dockerfile
!docker/
!cmd/**
!apps/**
!services/**
!src/**
!internal/**
!pkg/**
!crates/**
!go.mod
!go.sum
!Cargo.toml
!package.json
!package-lock.json
!pnpm-lock.yaml
!yarn.lock
!pyproject.toml
!poetry.lock
!requirements.txt
!requirements/*.txt
!Makefile
!LICENSE
!README.md
!CHANGELOG.md
!NOTICE
!THIRD_PARTY_NOTICES.md
!SECURITY.md
!CODEOWNERS

# --- Safety footgun guardrails ---
# 1) Никогда не отправлять ключи/секреты в контексте сборки.
# 2) Хранить только *.example для конфигов; реальные значения — через ARG/ENV/Secrets.
# 3) Для reproducible builds — фиксировать lock-файлы в allowlist (см. комментарии выше).
