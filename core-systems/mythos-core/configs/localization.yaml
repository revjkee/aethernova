# mythos-core/configs/localization.yaml
schema:
  version: 1.0
  notes: >
    Центральная конфигурация локализации для mythos-core.
    Предполагается использование ICU MessageFormat и CLDR-паттернов формата дат/чисел.
    Все локали задаются в BCP-47 (например, en-US, ru-RU, zh-Hant-TW).

runtime:
  defaultLocale: en-US
  defaultTimezone: UTC
  defaultCurrency: USD
  library:
    messages: icu          # icu|messageformat.js|babel (на уровне рантайма)
    dates: icu             # форматирование через ICU/CLDR
    numbers: icu
  policy:
    # Как вести себя при проблемах в рантайме
    missingKey: error      # error|warn|fallback
    missingTranslation: fallback
    unusedKeys: warn
    emptyString: warn
    invalidPluralCategory: error
    # Безопасность вывода
    escapeHTML: true
    allowedHTMLTags: [ "strong", "em", "b", "i", "u", "br", "code", "a" ]
    # Плейсхолдеры и переменные
    placeholderStyle: icu          # {name}, {count, number}, {count, plural, ...}
    requireAllPlaceholders: true   # ошибка, если не все переменные переданы
    trimWhitespace: smart           # none|all|smart

catalogs:
  # Где искать и как собирать каталоги переводов
  sourceLanguage: en-US
  searchPaths:
    - "locales/*/messages.@(yaml|yml|json|po)"
    - "modules/*/locales/*/messages.@(yaml|yml|json|po)"
  output:
    compiledDir: "build/i18n"
    bundleFormat: "json.min"        # json|min.json|mo
    splitByLocale: true
    includeSource: false
  ci:
    lint:
      enabled: true
      failOn:
        - missingKey
        - unusedKey
        - placeholderMismatch
        - invalidICUSyntax
    compile:
      enabled: true
      checkPluralCoverage: true
      checkRtlMarkers: true
    cache:
      enabled: true
      key: "i18n-{{ git.sha }}"

pseudolocalization:
  enabled: false          # включайте для dev/qa
  mode: bracket           # plain|bracket
  wrapper: [ "【", "】" ]  # применяется при mode=bracket
  expansionRatio: 0.3     # +30% длины
  map:
    a: "á"
    e: "ë"
    i: "ï"
    o: "ø"
    u: "û"
    y: "ÿ"
    c: "ç"
    A: "Å"
    E: "É"
    I: "Í"
    O: "Ó"
    U: "Ü"
    Y: "Ÿ"

locales:
  # Список поддерживаемых локалей и их атрибутов.
  # Добавляйте/удаляйте локали только через PR с проверкой в CI.
  - id: en-US
    name: "English (United States)"
    dir: ltr
    measurementSystem: us
    currency: USD
    number:
      decimal: "#,##0.###"
      currency: "¤#,##0.00;(¤#,##0.00)"
      percent: "#,##0%"
    dateTime:
      # ICU skeletons и явные паттерны
      date: { short: "M/d/yy", medium: "MMM d, y", long: "MMMM d, y" }
      time: { short: "h:mm a", medium: "h:mm:ss a" }
      datetime: { short: "M/d/yy, h:mm a", medium: "MMM d, y, h:mm:ss a" }
      firstDayOfWeek: mon
    pluralCategories: [ one, other ]
    relativeTime:
      past:  "{0} ago"
      future: "in {0}"

  - id: ru-RU
    name: "Русский (Россия)"
    dir: ltr
    measurementSystem: metric
    currency: RUB
    number:
      decimal: "#,##0.###"         # в рантайме учитывайте запятую как разделитель
      currency: "¤ #,##0.00;(¤ #,##0.00)"
      percent: "#,##0%"
    dateTime:
      date: { short: "dd.MM.y", medium: "d MMM y г.", long: "d MMMM y г." }
      time: { short: "HH:mm", medium: "HH:mm:ss" }
      datetime: { short: "dd.MM.y, HH:mm", medium: "d MMM y г., HH:mm:ss" }
      firstDayOfWeek: mon
    pluralCategories: [ one, few, many, other ]
    relativeTime:
      past:  "{0} назад"
      future: "через {0}"

  - id: uk-UA
    name: "Українська (Україна)"
    dir: ltr
    measurementSystem: metric
    currency: UAH
    number:
      decimal: "#,##0.###"
      currency: "¤ #,##0.00;(¤ #,##0.00)"
      percent: "#,##0%"
    dateTime:
      date: { short: "dd.MM.yy", medium: "d MMM y р.", long: "d MMMM y р." }
      time: { short: "HH:mm", medium: "HH:mm:ss" }
      datetime: { short: "dd.MM.yy, HH:mm", medium: "d MMM y р., HH:mm:ss" }
      firstDayOfWeek: mon
    pluralCategories: [ one, few, many, other ]
    relativeTime:
      past:  "{0} тому"
      future: "за {0}"

  - id: sv-SE
    name: "Svenska (Sverige)"
    dir: ltr
    measurementSystem: metric
    currency: SEK
    number:
      decimal: "#,##0.###"
      currency: "¤ #,##0.00;(¤ #,##0.00)"
      percent: "#,##0%"
    dateTime:
      date: { short: "yyyy-MM-dd", medium: "d MMM y", long: "d MMMM y" }
      time: { short: "HH:mm", medium: "HH:mm:ss" }
      datetime: { short: "yyyy-MM-dd HH:mm", medium: "d MMM y HH:mm:ss" }
      firstDayOfWeek: mon
    pluralCategories: [ one, other ]
    relativeTime:
      past:  "för {0} sedan"
      future: "om {0}"

  - id: de-DE
    name: "Deutsch (Deutschland)"
    dir: ltr
    measurementSystem: metric
    currency: EUR
    number:
      decimal: "#,##0.###"
      currency: "¤ #,##0.00;(¤ #,##0.00)"
      percent: "#,##0%"
    dateTime:
      date: { short: "dd.MM.yy", medium: "dd.MM.y", long: "d. MMMM y" }
      time: { short: "HH:mm", medium: "HH:mm:ss" }
      datetime: { short: "dd.MM.yy, HH:mm", medium: "dd.MM.y, HH:mm:ss" }
      firstDayOfWeek: mon
    pluralCategories: [ one, other ]
    relativeTime:
      past:  "vor {0}"
      future: "in {0}"

  - id: fr-FR
    name: "Français (France)"
    dir: ltr
    measurementSystem: metric
    currency: EUR
    number:
      decimal: "#,##0.###"
      currency: "¤ #,##0.00;(¤ #,##0.00)"
      percent: "#,##0%"
    dateTime:
      date: { short: "dd/MM/y", medium: "d MMM y", long: "d MMMM y" }
      time: { short: "HH:mm", medium: "HH:mm:ss" }
      datetime: { short: "dd/MM/y HH:mm", medium: "d MMM y HH:mm:ss" }
      firstDayOfWeek: mon
    pluralCategories: [ one, other ]
    relativeTime:
      past:  "il y a {0}"
      future: "dans {0}"

  - id: es-ES
    name: "Español (España)"
    dir: ltr
    measurementSystem: metric
    currency: EUR
    number:
      decimal: "#,##0.###"
      currency: "¤ #,##0.00;(¤ #,##0.00)"
      percent: "#,##0%"
    dateTime:
      date: { short: "d/M/yy", medium: "d MMM y", long: "d 'de' MMMM 'de' y" }
      time: { short: "H:mm", medium: "H:mm:ss" }
      datetime: { short: "d/M/yy H:mm", medium: "d MMM y H:mm:ss" }
      firstDayOfWeek: mon
    pluralCategories: [ one, other ]
    relativeTime:
      past:  "hace {0}"
      future: "en {0}"

  - id: pt-BR
    name: "Português (Brasil)"
    dir: ltr
    measurementSystem: metric
    currency: BRL
    number:
      decimal: "#,##0.###"
      currency: "¤ #,##0.00;(¤ #,##0.00)"
      percent: "#,##0%"
    dateTime:
      date: { short: "dd/MM/yy", medium: "d 'de' MMM 'de' y", long: "d 'de' MMMM 'de' y" }
      time: { short: "HH:mm", medium: "HH:mm:ss" }
      datetime: { short: "dd/MM/yy HH:mm", medium: "d 'de' MMM 'de' y HH:mm:ss" }
      firstDayOfWeek: mon
    pluralCategories: [ one, other ]
    relativeTime:
      past:  "há {0}"
      future: "em {0}"

  - id: pl-PL
    name: "Polski (Polska)"
    dir: ltr
    measurementSystem: metric
    currency: PLN
    number:
      decimal: "#,##0.###"
      currency: "¤ #,##0.00;(¤ #,##0.00)"
      percent: "#,##0%"
    dateTime:
      date: { short: "dd.MM.y", medium: "d MMM y", long: "d MMMM y" }
      time: { short: "HH:mm", medium: "HH:mm:ss" }
      datetime: { short: "dd.MM.y HH:mm", medium: "d MMM y HH:mm:ss" }
      firstDayOfWeek: mon
    pluralCategories: [ one, few, many, other ]
    relativeTime:
      past:  "{0} temu"
      future: "za {0}"

  - id: cs-CZ
    name: "Čeština (Česko)"
    dir: ltr
    measurementSystem: metric
    currency: CZK
    number:
      decimal: "#,##0.###"
      currency: "¤ #,##0.00;(¤ #,##0.00)"
      percent: "#,##0%"
    dateTime:
      date: { short: "d. M. y", medium: "d. M. y", long: "d. MMMM y" }
      time: { short: "H:mm", medium: "H:mm:ss" }
      datetime: { short: "d. M. y H:mm", medium: "d. M. y H:mm:ss" }
      firstDayOfWeek: mon
    pluralCategories: [ one, other ]
    relativeTime:
      past:  "před {0}"
      future: "za {0}"

  - id: tr-TR
    name: "Türkçe (Türkiye)"
    dir: ltr
    measurementSystem: metric
    currency: TRY
    number:
      decimal: "#,##0.###"
      currency: "¤ #,##0.00;(¤ #,##0.00)"
      percent: "#,##0%"
    dateTime:
      date: { short: "d.MM.y", medium: "d MMM y", long: "d MMMM y" }
    pluralCategories: [ one, other ]
    relativeTime:
      past:  "{0} önce"
      future: "{0} içinde"

  - id: ar-SA
    name: "العربية (السعودية)"
    dir: rtl
    measurementSystem: metric
    currency: SAR
    number:
      decimal: "#,##0.###"
      currency: "¤ #,##0.00;(¤ #,##0.00)"
      percent: "#,##0%"
    dateTime:
      date: { short: "dd/MM/y", medium: "dd MMM y", long: "dd MMMM y" }
      firstDayOfWeek: sat
    pluralCategories: [ zero, one, two, few, many, other ]
    relativeTime:
      past:  "منذ {0}"
      future: "خلال {0}"

  - id: he-IL
    name: "עברית (ישראל)"
    dir: rtl
    measurementSystem: metric
    currency: ILS
    number:
      decimal: "#,##0.###"
      currency: "¤ #,##0.00;(¤ #,##0.00)"
    dateTime:
      date: { short: "dd.MM.yy", medium: "d MMM y", long: "d MMMM y" }
      firstDayOfWeek: sun
    pluralCategories: [ one, two, many, other ]
    relativeTime:
      past:  "לפני {0}"
      future: "בעוד {0}"

  - id: fa-IR
    name: "فارسی (ایران)"
    dir: rtl
    measurementSystem: metric
    currency: IRR
    number:
      decimal: "#,##0.###"
      currency: "¤ #,##0.00;(¤ #,##0.00)"
    dateTime:
      date: { short: "y/M/d", medium: "d MMM y", long: "d MMMM y" }
    pluralCategories: [ one, other ]
    relativeTime:
      past:  "{0} پیش"
      future: "در {0}"

  - id: zh-Hans-CN
    name: "简体中文（中国）"
    dir: ltr
    measurementSystem: metric
    currency: CNY
    number:
      decimal: "#,##0.###"
      currency: "¤#,##0.00;(¤#,##0.00)"
    dateTime:
      date: { short: "y/M/d", medium: "y年M月d日", long: "y年M月d日" }
    pluralCategories: [ other ]
    relativeTime:
      past:  "{0}前"
      future: "{0}后"

  - id: zh-Hant-TW
    name: "繁體中文（台灣）"
    dir: ltr
    measurementSystem: metric
    currency: TWD
    number:
      decimal: "#,##0.###"
      currency: "¤#,##0.00;(¤#,##0.00)"
    dateTime:
      date: { short: "y/M/d", medium: "y年M月d日", long: "y年M月d日" }
    pluralCategories: [ other ]
    relativeTime:
      past:  "{0}前"
      future: "{0}後"

  - id: ja-JP
    name: "日本語（日本）"
    dir: ltr
    measurementSystem: metric
    currency: JPY
    number:
      decimal: "#,##0.###"
      currency: "¤#,##0;(¤#,##0)"   # без копеек
    dateTime:
      date: { short: "y/MM/dd", medium: "y年M月d日", long: "y年M月d日" }
    pluralCategories: [ other ]
    relativeTime:
      past:  "{0}前"
      future: "{0}後"

  - id: ko-KR
    name: "한국어(대한민국)"
    dir: ltr
    measurementSystem: metric
    currency: KRW
    number:
      decimal: "#,##0.###"
      currency: "¤#,##0;(¤#,##0)"
    dateTime:
      date: { short: "yy. M. d.", medium: "y. M. d.", long: "y년 M월 d일" }
    pluralCategories: [ other ]
    relativeTime:
      past:  "{0} 전"
      future: "{0} 후"

fallbacks:
  # Цепочки падения на резервные языки.
  # Используются, если отсутствует перевод в требуемой локали.
  chains:
    ru:     [ "ru-RU", "uk-UA", "en-US" ]
    uk:     [ "uk-UA", "ru-RU", "en-US" ]
    sv:     [ "sv-SE", "en-GB", "en-US" ]
    zh-Hant:[ "zh-Hant-TW", "zh-Hans-CN", "en-US" ]
    default:[ "en-US" ]

units:
  # Системы единиц по умолчанию для локалей; при необходимости переопределяйте в коде.
  temperature:
    metric: "°C"
    us: "°F"
  length:
    metric: "m"
    us: "ft"
  weight:
    metric: "kg"
    us: "lb"

keys:
  # Рекомендуемые контексты и примеры сообщений (для линтера и перевода).
  # Значения здесь — не боевые переводы, а шаблоны и комментарии для CAT-инструмента.
  common:
    ok:
      description: "Кнопка подтверждения"
      example: "{count, plural, one {ОК} few {ОК} many {ОК} other {ОК}}"
      placeholders:
        count: number
    cancel:
      description: "Кнопка отмены"
      example: "Отмена"
    loading:
      description: "Индикатор загрузки с прогрессом"
      example: "Загрузка… {progress, number, percent}"

  auth:
    signin_title:
      description: "Заголовок страницы входа"
      example: "Вход в аккаунт"
    signin_button:
      description: "Надпись на кнопке входа"
      example: "Войти"
    password_requirements:
      description: "Текст требований к паролю"
      example: "Минимум {min} символов, хотя бы {classes} классов"
      placeholders:
        min: number
        classes: number

  time:
    just_now:
      description: "Относительное время — только что"
      example: "Только что"
    relative:
      description: "Общий шаблон относительного времени"
      example: "{delta, plural, one {# секунда назад} few {# секунды назад} many {# секунд назад} other {# секунды назад}}"
      placeholders:
        delta: number

testing:
  # Настройки для тестов и генераторов снапшотов
  deterministic:
    freezeNow: "2024-01-01T00:00:00Z"
    numberLocale: "C"
  fixtures:
    locales: [ "en-US", "ru-RU", "sv-SE", "ar-SA", "zh-Hans-CN" ]

tooling:
  extract:
    globs:
      - "src/**/*.py"
      - "src/**/*.ts"
      - "src/**/*.tsx"
      - "templates/**/*.html"
    ignore:
      - "node_modules/**"
      - "build/**"
  formatChecks:
    enforceRtlMarkers: true        # проверять наличие Unicode-маркировок для RTL при смешанном тексте
    maxStringLength:
      warn: 120
      error: 200
  ciTargets:
    - lint
    - compile
    - test
