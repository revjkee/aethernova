# mythos-core/configs/templates/localization_pack.example.yaml
# ШАБЛОН ПАКЕТА ЛОКАЛИЗАЦИИ ДЛЯ ОДНОГО ЯЗЫКА (BCP-47)
# Копируйте файл, меняйте locale/fallbacks/строки и подключайте в сборку.

schema_version: "1.1.0"

metadata:
  pack_id: "mythos-core-ru-ru"
  locale: "ru-RU"                  # BCP-47: язык-РЕГИОН, напр. en-US, tr-TR, uk-UA
  direction: "ltr"                 # ltr | rtl
  fallbacks: ["ru", "en"]          # fallback-цепочка на случай отсутствующих ключей
  application: "mythos-core"
  component: "frontend"
  owners:
    - name: "Localization Team"
      email: "l10n@yourorg.example"
  compatibility:
    min_app_version: "0.1.0"
    max_app_version: "999.999.999"
  updated_at: "2025-08-27"
  description: "Промышленный шаблон локализации mythos-core на русском (Россия)."

quality_gate:
  # Политика при отсутствии строки: error|warn|fallback
  missing_policy: "fallback"
  # Требуемое покрытие ключей в доменах (для CI)
  required_coverage:
    common: 1.0
    ui: 0.95
    validation: 1.0
    errors: 1.0
  # Список ключей, отсутствие которых — ошибка сборки
  required_keys:
    - common.app.title
    - ui.nav.home
    - errors.E_INTERNAL
  # Запрещаем “голые” HTML, только whitelist ниже
  rich_text:
    allowed_tags: ["b", "strong", "i", "em", "code", "a", "br"]
    allowed_attrs:
      a: ["href", "rel", "target"]
    # Автодобавление rel="noopener noreferrer" для target=_blank
    enforce_link_rel: true

formats:
  # Форматы дат/времени по CLDR/ICU skeleton (см. Unicode TR35)
  datetime:
    timezone: "Europe/Moscow"
    first_day_of_week: 1            # 1=понедельник
    date:
      short: "dd.MM.y"
      medium: "d MMM y"
      long: "d MMMM y 'г.'"
      full: "EEEE, d MMMM y 'г.'"
    time:
      short: "HH:mm"
      medium: "HH:mm:ss"
      long: "HH:mm:ss z"
      full: "HH:mm:ss zzzz"
    datetime:
      short: "{date.short}, {time.short}"
      medium: "{date.medium}, {time.medium}"
      long: "{date.long}, {time.long}"
      full: "{date.full}, {time.full}"
    relative_time:
      # timeago-шаблоны, ICU plural
      past:
        seconds: "{n, plural, one {# сек. назад} few {# сек. назад} many {# сек. назад} other {# сек. назад}}"
        minutes: "{n, plural, one {# мин. назад} few {# мин. назад} many {# мин. назад} other {# мин. назад}}"
        hours:   "{n, plural, one {# час назад} few {# часа назад} many {# часов назад} other {# часа назад}}"
        days:    "{n, plural, one {# день назад} few {# дня назад} many {# дней назад} other {# дня назад}}"
      future:
        minutes: "через {n, plural, one {# минуту} few {# минуты} many {# минут} other {# минуты}}"
  numbers:
    decimal:
      min_fraction: 0
      max_fraction: 3
      grouping: true
    currency:
      default: "RUB"
      pattern: "¤#,##0.00"          # ICU pattern
    percent:
      pattern: "#,##0%"
  units:
    # Единицы измерения (ICU unit formatting)
    length:
      meter: "{n, plural, one {# метр} few {# метра} many {# метров} other {# метра}}"
    bytes:
      # Автоматический выбор суффикса делает код, здесь — шаблоны подписей
      labels: ["Б", "КБ", "МБ", "ГБ", "ТБ"]

variables:
  # Объявление переменных и типов — для статической валидации ICU-шаблонов
  # Типы: string|number|date|time|datetime|select(gender)|select(status)
  common:
    user_name: "string"
    count: "number"
    date: "date"
    total: "number"
    amount: "number"
    gender: "select(male|female|other)"
    status: "select(active|blocked|pending)"

domains:
  # --- Общие строки приложения
  common:
    app:
      title: "Mythos Core"
      tagline: "Платформа семантических сервисов"
    actions:
      save: "Сохранить"
      cancel: "Отмена"
      delete: "Удалить"
      edit: "Редактировать"
      close: "Закрыть"
    greetings:
      # Пример select по гендеру с fallback
      hello_gendered: "{gender, select, male {Добро пожаловать, {user_name}!} female {Добро пожаловать, {user_name}!} other {Здравствуйте, {user_name}!}}"
    counters:
      # Полноценные русские формы plural (one/few/many/other)
      notifications: "{count, plural, one {# уведомление} few {# уведомления} many {# уведомлений} other {# уведомления}}"
    money:
      total_due: "К оплате: {amount, number, ::currency/standard}"

  # --- UI: навигация, заголовки, кнопки
  ui:
    nav:
      home: "Главная"
      settings: "Настройки"
      profile: "Профиль"
      logout: "Выход"
    buttons:
      try_again: "Повторить попытку"
      view_details: "Показать детали"
    sections:
      overview: "Обзор"
      activity: "Активность"
      analytics: "Аналитика"

  # --- Ошибки по кодам (E_<CODE>) и человекочитаемые описания
  errors:
    # Внутренние ошибки
    E_INTERNAL:
      title: "Внутренняя ошибка"
      message: "Что-то пошло не так. Попробуйте позже."
    E_NETWORK:
      title: "Сетевая ошибка"
      message: "Нет соединения с сервером. Проверьте подключение к сети."
    # Валидация/авторизация
    E_UNAUTHORIZED:
      title: "Требуется вход"
      message: "Для доступа к ресурсу выполните вход в систему."
    E_FORBIDDEN:
      title: "Доступ запрещен"
      message: "У вас нет прав для выполнения этого действия."
    E_NOT_FOUND:
      title: "Не найдено"
      message: "Запрошенный ресурс не существует или был удален."
    # Специальные с плейсхолдерами
    E_RATE_LIMIT:
      title: "Слишком много запросов"
      message: "Превышен лимит. Попробуйте снова {minutes, plural, one {через # минуту} few {через # минуты} many {через # минут} other {через # минуты}}."

  # --- Сообщения валидации форм
  validation:
    required: "Поле обязательно"
    min_length: "Минимальная длина: {min} символов"
    max_length: "Максимальная длина: {max} символов"
    pattern_mismatch: "Неверный формат"
    email: "Введите корректный email"
    url: "Введите корректный URL"
    number_range: "Значение должно быть в диапазоне {min}–{max}"
    password_strength:
      too_weak: "Слабый пароль"
      ok: "Пароль приемлемый"
      strong: "Надежный пароль"
    # С примерами сложных правил
    username_rules:
      description: "3–32 символа, латиница, цифры, «_» и «-»"
      error: "Имя пользователя имеет недопустимые символы"

  # --- Уведомления/почта (разметка разрешена только из whitelist)
  notifications:
    email:
      subject_welcome: "Добро пожаловать в Mythos Core"
      body_welcome_html: "Здравствуйте, {user_name}!<br>Ваш аккаунт создан. Посетите <a href=\"{url}\" target=\"_blank\">панель управления</a>."
    system:
      maintenance_scheduled: "Технические работы {date, date, ::yyyy.MM.dd} с {time, time, ::HH:mm}"

  # --- A11y/ARIA-ярлыки
  a11y:
    nav_skip_to_content: "Перейти к содержимому"
    modal_close: "Закрыть диалог"

status:
  # Покрытие по доменам — обновляется сборкой (может считаться автоматически)
  coverage:
    common: 1.0
    ui: 1.0
    errors: 1.0
    validation: 1.0
    notifications: 1.0
    a11y: 1.0
  reviewed_by:
    - "lead-linguist@yourorg.example"
  review_notes: "Шаблон утвержден. При копировании под другой язык обновите plural/select и форматы."
  freeze: false

testing:
  # Дерево тест-кейсов локализации (используется в e2e/i18n snapshot-тестах)
  snapshots:
    # Ключи для обязательной проверки наличия плейсхолдеров и их типов
    placeholders_must_exist:
      - domains.common.greetings.hello_gendered
      - domains.common.counters.notifications
      - domains.notifications.email.body_welcome_html
    # Примеры значений для рендеринга
    examples:
      - key: "domains.common.counters.notifications"
        vars: { count: 1 }
      - key: "domains.common.counters.notifications"
        vars: { count: 2 }
      - key: "domains.common.counters.notifications"
        vars: { count: 5 }
      - key: "domains.notifications.email.body_welcome_html"
        vars: { user_name: "Анна", url: "https://console.example" }

# --- Подсказки для переводчиков (не попадает в рантайм, но читается tooling’ом)
hints:
  glossary:
    Mythos Core: "Название продукта; не переводить."
  style_guide:
    tone: "Нейтральный, деловой, вежливый"
    capitalization: "В заголовках с заглавной только первое слово"
  do_not_translate:
    - "Mythos Core"
    - "API"
    - "OAuth"

# --- Резерв: ключи, которые должны быть одинаковы между языками (idempotent)
locks:
  same_across_locales:
    - "domains.common.app.title"
    - "domains.a11y.nav_skip_to_content"
