# =============================================================================
# airdrop_manager /.env.example
# Пример конфигурации. Никогда не храните реальные секреты в репозитории.
# Копируйте как `.env` и заполняйте значения.
# =============================================================================

# -----------------------------------------------------------------------------
# Общие параметры приложения
# -----------------------------------------------------------------------------
APP_NAME=airdrop_manager
APP_ENV=development               # development | staging | production
APP_TIMEZONE=UTC
APP_PORT=8080
LOG_LEVEL=INFO                    # CRITICAL | ERROR | WARNING | INFO | DEBUG
JSON_LOGS=true                    # true | false

# Безопасный режим и аварийная остановка
AETHERNOVA_SAFE_MODE=1            # 1 включает безопасный режим
AETHERNOVA_KILL=0                 # 1 принудительно включает kill-switch для остановки
AETHERNOVA_RUNS_DIR=./ae_runs     # базовый каталог артефактов и логов запусков

# Ключ API для защищенных HTTP-эндпоинтов менеджера
AETHERNOVA_API_KEY=change_me

# -----------------------------------------------------------------------------
# База данных и кэш
# -----------------------------------------------------------------------------
# Пример для Postgres (asyncpg): postgresql+asyncpg://user:pass@host:5432/dbname
DATABASE_URL=postgresql+asyncpg://airdrop_user:change_me@localhost:5432/airdrop_db
RUN_DB_MIGRATIONS=true

# Redis для кэша, очередей, rate limit
REDIS_URL=redis://localhost:6379/0
CACHE_DEFAULT_TTL_SECONDS=300

# -----------------------------------------------------------------------------
# Очереди и фоновые задачи
# -----------------------------------------------------------------------------
# При использовании RabbitMQ:
RABBITMQ_URL=amqp://guest:guest@localhost:5672/
# Параметры исполнителя задач
JOB_MAX_CONCURRENCY=4
JOB_POLL_INTERVAL_SECONDS=2

# -----------------------------------------------------------------------------
# Сеть, CORS, HTTP
# -----------------------------------------------------------------------------
CORS_ALLOWED_ORIGINS=https://app.example.com,https://admin.example.com
CORS_ALLOWED_METHODS=GET,POST,OPTIONS
HTTP_REQUEST_TIMEOUT_SECONDS=15
RATE_LIMIT_GLOBAL_PER_MINUTE=120

# -----------------------------------------------------------------------------
# Хранилище артефактов (опционально S3-совместимое)
# -----------------------------------------------------------------------------
S3_ENDPOINT=http://localhost:9000
S3_REGION=us-east-1
S3_BUCKET=airdrop-artifacts
S3_ACCESS_KEY_ID=changeme
S3_SECRET_ACCESS_KEY=changeme
S3_USE_SSL=false

# -----------------------------------------------------------------------------
# Почта и уведомления (опционально)
# -----------------------------------------------------------------------------
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USERNAME=no-reply@example.com
SMTP_PASSWORD=change_me
SMTP_USE_TLS=true
ALERT_EMAILS=security@example.com,ops@example.com

# -----------------------------------------------------------------------------
# Телеметрия и наблюдаемость
# -----------------------------------------------------------------------------
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317
OTEL_SERVICE_NAME=airdrop_manager
PROMETHEUS_METRICS=true
SENTRY_DSN=

# -----------------------------------------------------------------------------
# Админ доступ
# -----------------------------------------------------------------------------
ADMIN_EMAILS=admin1@example.com,admin2@example.com
DASH_BASIC_AUTH_USER=admin
DASH_BASIC_AUTH_PASS=change_me

# -----------------------------------------------------------------------------
# Параметры самого эирдропа
# -----------------------------------------------------------------------------
AIRDROP_ID=airdrop_q4_mainnet
AIRDROP_NAME=Q4 Mainnet Airdrop
AIRDROP_START_AT=2025-09-15T00:00:00Z
AIRDROP_END_AT=2025-10-15T00:00:00Z
AIRDROP_TOTAL_SUPPLY=1000000
AIRDROP_DECIMALS=18
AIRDROP_MAX_CLAIMS_PER_USER=1
AIRDROP_MIN_ACCOUNT_AGE_DAYS=0
AIRDROP_KYC_REQUIRED=false

# Файл или URL со списком кошельков, исключенных из участия
WALLET_BLOCKLIST_PATH=./config/wallet_blocklist.txt
IP_BLOCKLIST_PATH=./config/ip_blocklist.txt

# Антиабьюз и ограничение частоты
RATE_LIMIT_CLAIM_PER_HOUR=3
RATE_LIMIT_CLAIM_BURST=3
IDEMPOTENCY_TTL_SECONDS=3600

# -----------------------------------------------------------------------------
# Провайдеры цен/курсов (опционально)
# -----------------------------------------------------------------------------
COINGECKO_API_KEY=
COINMARKETCAP_API_KEY=

# -----------------------------------------------------------------------------
# EVM-настройки (Ethereum, BSC, Polygon и т.п.)
# -----------------------------------------------------------------------------
FEATURE_ENABLE_EVM=true
EVM_CHAIN_ID=1
EVM_RPC_URL=https://mainnet.infura.io/v3/your_project_id
EVM_TOKEN_ADDRESS=0x0000000000000000000000000000000000000000
EVM_DISTRIBUTOR_ADDRESS=0x0000000000000000000000000000000000000000
EVM_SIGNER_PRIVATE_KEY=0xreplace_with_private_key
EVM_MIN_CONFIRMATIONS=5
EVM_GAS_PRICE_GWEI=5
EVM_GAS_LIMIT=120000

# -----------------------------------------------------------------------------
# TON-настройки
# -----------------------------------------------------------------------------
FEATURE_ENABLE_TON=true
TON_API_ENDPOINT=https://toncenter.com/api/v2/jsonRPC
TON_API_KEY=
TON_MASTER_ADDRESS=EQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAM9c
TON_JETTON_ADDRESS=EQBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBB9s
TON_WALLET_MNEMONIC="word1 word2 word3 ..."
TON_MIN_CONFIRMATIONS=1

# -----------------------------------------------------------------------------
# Solana (опционально)
# -----------------------------------------------------------------------------
FEATURE_ENABLE_SOLANA=false
SOLANA_RPC_URL=https://api.mainnet-beta.solana.com
SOLANA_AIRDROP_AUTH_SECRET=
SOLANA_MIN_CONFIRMATIONS=1

# -----------------------------------------------------------------------------
# Telegram интеграция (опционально)
# -----------------------------------------------------------------------------
FEATURE_ENABLE_TELEGRAM=false
TELEGRAM_BOT_TOKEN=
TELEGRAM_WEBHOOK_SECRET=
TELEGRAM_ALLOWED_USER_IDS=123456789,987654321

# -----------------------------------------------------------------------------
# Вебхуки интеграций
# -----------------------------------------------------------------------------
WEBHOOK_OUTBOUND_ENABLED=false
WEBHOOK_OUTBOUND_URL=https://example.com/airdrop/webhook
WEBHOOK_OUTBOUND_SECRET=change_me

# -----------------------------------------------------------------------------
# Криптографические ключи подписи
# -----------------------------------------------------------------------------
HMAC_SIGNING_KEY=replace_with_strong_random_key

# -----------------------------------------------------------------------------
# Валидация и форматы
# -----------------------------------------------------------------------------
ALLOWED_ADDRESS_PREFIXES=0x,EQ
REJECT_ZERO_BALANCE=true
MIN_BALANCE_WEI=0

# -----------------------------------------------------------------------------
# Отладка и разработка
# -----------------------------------------------------------------------------
DEBUG_SQL=false
DISABLE_DANGEROUS_OPS=true
